<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Resume builder</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <script data-main="js/main" src="js/lib/require.js"></script>
</head>
<body>
    <div class="header">
        <div class="user-name">Имя пользователя</div>
        <div class="button button_login"><a href="http://localhost:3000/oauth">Войти</a></div>
        <div class="logout">
            <form action="http://localhost:3000/oauth/logout" method="POST">
                <input type="submit" class="button button_logout" value="Выйти" />
            </form>
        </div>
    </div>

    <div class="HH-ResumeBuilder-Container container"></div>

    <script type="text/template" id="HH-ResumeBuilder-AppTemplate">
        <div class="HH-ResumeBuilder-ResumeList">
        </div>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-ResumeTemplate">
        <div class="resume">
            <div class="HH-Resume-ResumeSection section">
                <div class="section__title">
                    <h3 class="section__title-text">Персональная информация</h3>
                    <button class="HH-ResumeSection-Switch section__title-button"
                            type="button">
                        Изменить
                    </button>
                    <button class="HH-ResumeSection-Switch section__title-button section__title-button_hidden"
                            type="button">
                        Отменить
                    </button>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Фамилия</label>
                    <span class="control__value"><%= resume.last_name %></span>
                    
                    <div class="control__input">
                        <input class="HH-ResumeSection-ControlTextbox"
                               type="text"
                               value="<%= resume.last_name %>"
                               name="last_name"
                               data-hh-name="last_name"/>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Имя</label>
                    <span class="control__value"><%= resume.first_name %></span>
                    
                    <div class="control__input">
                        <input class="HH-ResumeSection-ControlTextbox"
                               type="text"
                               value="<%= resume.first_name %>"
                               name="first_name"
                               data-hh-name="first_name"/>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Отчество</label>
                    <span class="control__value"><%= resume.middle_name %></span>
                    
                    <div class="control__input">
                        <input class="HH-ResumeSection-ControlTextbox"
                               type="text"
                               value="<%= resume.middle_name %>"
                               name="middle_name"
                               data-hh-name="middle_name"/>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Пол</label>
                    <span class="control__value"><%= resume.gender.name %></span>

                    <div class="control__input">
                        <ul class="checkbox-list">
                        <% _.each(dictionary.gender, function(gender) { %>
                            <li class="checkbox-list__item">
                                <label>
                                    <input class="HH-ResumeSection-ControlRadio"
                                           type="radio"
                                           value="<%= gender.id %>"
                                           name="gender"
                                           data-hh-name="gender.id"
                                           <%= gender.id === resume.gender.id ? 'checked' : '' %>/>
                                    <%= gender.name %>
                                </label>
                            </li>
                        <% }); %>
                        </ul>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Дата рождения</label>

                    <div class="HH-ResumeSection-Component" data-hh-component="birth-date"></div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Город проживания</label>
                    <span class="control__value"><%= resume.area.name %></span>

                    <div class="HH-ResumeSection-Component" data-hh-component="area"></div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Гражданство</label>
                    <span class="control__value">
                        <%= _.map(resume.citizenship, function(element) { return element.name; }).join(', ') %>
                    </span>

                    <div class="HH-ResumeSection-Component" data-hh-component="citizenship"></div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Разрешение на работу</label>
                    <span class="control__value">
                        <%= _.map(resume.work_ticket, function(element) { return element.name; }).join(', ') %>
                    </span>

                    <div class="HH-ResumeSection-Component" data-hh-component="work-ticket"></div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing control_submit">
                    <label class="control__label"></label>
                    
                    <div class="control__input">
                        <button type="button" class="HH-ResumeSection-Submit">Сохранить</button>
                    </div>
                </div>
            </div>

            <div></div>

            <div class="HH-Resume-ResumeSection">
                <div class="section__title">
                    <h3 class="section__title-text">Желаемая должность и зарплата</h3>
                    <button class="HH-ResumeSection-Switch section__title-button"
                            type="button">
                        Изменить
                    </button>
                    <button class="HH-ResumeSection-Switch section__title-button section__title-button_hidden"
                            type="button">
                        Отменить
                    </button>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Желаемая должность</label>
                    <span class="control__value"><%= resume.title %></span>

                    <div class="control__input">
                        <input class="HH-ResumeSection-ControlTextbox"
                               type="text"
                               value="<%= resume.title %>"
                               name="title"
                               data-hh-name="title"
                               placeholder="Например, «Менеджер по продажам»"/>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Профессиональная область</label>
                    <span class="control__value"><%= resume.specializationNames %></span>

                    <div class="control__input">
                        <select class="HH-SpecializationControl-Select">
                            <% _.each(specializations, function(specialization) { %>
                            <option value="<%= specialization.id %>"
                                    <%= resume.specialization[0].profarea_id === specialization.id ? 'selected' : '' %>>
                                <%= specialization.name %>
                            </option>
                            <% }); %>
                        </select>
                        <div class="HH-ResumeSection-SpecializationList"></div>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Желаемая зарплата</label>
                    <span class="control__value"><%= resume.salary.amount %> <%= resume.salary.currency %></span>

                    <div class="control__input">
                        <input class="HH-ResumeSection-ControlTextbox"
                               type="text"
                               value="<%= resume.salary.amount %>"
                               name="amount"
                               data-hh-name="salary.amount"/>

                        <ul class="checkbox-list">
                        <% _.each(dictionary.currency, function(currency) { %>
                            <li class="checkbox-list__item">
                                <label>
                                    <input class="HH-ResumeSection-ControlRadio"
                                           type="radio"
                                           value="<%= currency.code %>"
                                           name="currency"
                                           data-hh-name="salary.currency"
                                           <%= currency.code === resume.salary.currency ? 'checked' : '' %>/>
                                    <%= currency.abbr %>
                                </label>
                            </li>
                        <% }); %>
                        </ul>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Занятость</label>
                    <span class="control__value"><%= resume.employment.name %></span>

                    <div class="control__input">
                        <ul class="checkbox-list">
                        <% _.each(dictionary.employment, function(employment) { %>
                            <li class="checkbox-list__item">
                                <label>
                                    <input class="HH-ResumeSection-ControlRadio"
                                           type="radio"
                                           value="<%= employment.id %>"
                                           name="employment"
                                           data-hh-name="employment.id"
                                           <%= employment.id === resume.employment.id ? 'checked' : '' %>/>
                                    <%= employment.name %>
                                </label>
                            </li>
                        <% }); %>
                        </ul>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">График работы</label>
                    <span class="control__value"><%= resume.schedule.name %></span>

                    <div class="control__input">
                        <ul class="checkbox-list">
                        <% _.each(dictionary.schedule, function(schedule) { %>
                            <li class="checkbox-list__item">
                                <label>
                                    <input class="HH-ResumeSection-ControlRadio"
                                           type="radio"
                                           value="<%= schedule.id %>"
                                           name="schedule"
                                           data-hh-name="schedule.id"
                                           <%= schedule.id === resume.schedule.id ? 'checked' : '' %>/>
                                    <%= schedule.name %>
                                </label>
                            </li>
                        <% }); %>
                        </ul>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Переезд</label>
                    <span class="control__value"><%= resume.relocation.type.name %></span>

                    <div class="control__input">
                        <ul class="checkbox-list">
                        <% _.each(dictionary.relocation_type, function(relocationType) { %>
                            <li class="checkbox-list__item">
                                <label>
                                    <input class="HH-ResumeSection-ControlRadio"
                                           type="radio"
                                           value="<%= relocationType.id %>"
                                           name="relocation"
                                           data-hh-name="relocation.type.id"
                                           <%= relocationType.id === resume.relocation.type.id ? 'checked' : '' %>/>
                                    <%= relocationType.name %>
                                </label>
                            </li>
                        <% }); %>
                        </ul>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Готовность к командировкам</label>
                    <span class="control__value"><%= resume.business_trip_readiness.name %></span>

                    <div class="control__input">
                        <ul class="checkbox-list">
                        <% _.each(dictionary.business_trip_readiness, function(readiness) { %>
                            <li class="checkbox-list__item">
                                <label>
                                    <input class="HH-ResumeSection-ControlRadio"
                                           type="radio"
                                           value="<%= readiness.id %>"
                                           name="business_trip_readiness"
                                           data-hh-name="business_trip_readiness.id"
                                           <%= readiness.id === resume.business_trip_readiness.id ? 'checked' : '' %>/>
                                    <%= readiness.name %>
                                <label>
                            </li>
                        <% }); %>
                        </ul>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing">
                    <label class="control__label">Время в пути</label>
                    <span class="control__value"><%= resume.travel_time.name %></span>

                    <div class="control__input">
                        <ul class="checkbox-list">
                        <% _.each(dictionary.travel_time, function(time) { %>
                            <li class="checkbox-list__item">
                                <label>
                                    <input class="HH-ResumeSection-ControlRadio"
                                           type="radio"
                                           value="<%= time.id %>"
                                           name="travel_time"
                                           data-hh-name="travel_time.id"
                                           <%= time.id === resume.travel_time.id ? 'checked' : '' %>/>
                                    <%= time.name %>
                                </label>
                            </li>
                        <% }); %>
                        </ul>
                    </div>
                </div>

                <div class="HH-ResumeSection-Control control control_viewing control_submit">
                    <label class="control__label"></label>
                    <div class="control__input">
                        <button type="button" class="HH-ResumeSection-Submit">Сохранить</button>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-SpecializationTemplate">
        <ul class="checkbox-list">
        <% _.each(specialization.specializations, function(specialization) { %>
            <li class="checkbox-list__item">
                <label>
                    <input class="HH-ResumeSection-ControlSpecialization"
                           type="checkbox"
                           value="<%= specialization.id %>"
                           name="specialization"
                           data-hh-name="id"
                           <%= (specializationIds.indexOf(specialization.id) !== -1) ? 'checked' : '' %>/>
                    <%= specialization.name %>
                </label>
            </li>
        <% }); %>
        </ul>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-Component-BirthDate">
        <span class="control__value">
            <%= date.day %>
            <%= calendar.months[date.month - 1] %>
            <%= date.year %>
        </span>

        <div class="control__input">
            <select name="birth_date-day">
                <% _.each(_.range(1,  calendar.days[date.month - 1] + 1), function(day) { %>
                <option value="<%= day %>"
                <%= date.day === day ? 'selected' : '' %>>
                <%= day %>
                </option>
                <% }); %>
            </select>

            <select class="HH-ResumeBuilder-Component-BirthDate-Month"
                    name="birth_date-month">
                <% _.each(calendar.months, function(month, index) { %>
                <option value="<%= index + 1 %>"
                <%= date.month === index + 1 ? 'selected' : '' %>>
                <%= month %>
                </option>
                <% }); %>
            </select>

            <input class="HH-ResumeBuilder-Component-BirthDate-Year"
                   value="<%= date.year %>"
                   name="birth_date-year"/>
        </div>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-Component-Area">
        <div class="control__input">
            <input class="HH-ResumeBuilder-Component-Area-Input"
                   value="<%= area.name %>"
                   name="area_name"/>

            <button type="button" class="HH-ResumeBuilder-Component-Area-ShowModal">Выбрать из списка</button>
            <div class="HH-ResumeBuilder-Component-Suggest"></div>
            <div class="HH-ResumeBuilder-Component-AreaModal areas-wrapper"></div>
        </div>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-Component-Citizenship">
        <div class="control__input">
            <ul class="checkbox-list">
                <li class="checkbox-list__item">
                    <label>
                        <input type="radio"
                               <%= selectedAreas.length === 1 && selectedAreas[0].id === RUSSIA ? 'checked' : ''  %>
                               name="HH-ResumeBuilder-Component-Citizenship"
                               class="HH-ResumeBuilder-Component-Citizenship-Russia" />
                        Россия
                    </label>
                </li>
                <li class="checkbox-list__item">
                    <label>
                        <input type="radio"
                               <%= selectedAreas.length !== 1 || selectedAreas[0].id !== RUSSIA ? 'checked' : ''  %>
                               name="HH-ResumeBuilder-Component-Citizenship"
                               class="HH-ResumeBuilder-Component-Citizenship-Other" />
                        Другие страны
                    </label>
                </li>
            </ul>

            <div class="HH-ResumeBuilder-Component-CountryPicker"></div>
        </dov>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-Component-WorkTicket">
        <div class="control__input">
            <ul class="checkbox-list">
                <li class="checkbox-list__item">
                    <label>
                        <input type="radio"
                               <%= selectedAreas.length === 1 && selectedAreas[0].id === RUSSIA ? 'checked' : ''  %>
                               name="HH-ResumeBuilder-Component-WorkTicket"
                               class="HH-ResumeBuilder-Component-WorkTicket-Russia" />
                        Россия
                    </label>
                </li>
                <li class="checkbox-list__item">
                    <label>
                        <input type="radio"
                               <%= selectedAreas.length !== 1 || selectedAreas[0].id !== RUSSIA ? 'checked' : ''  %>
                               name="HH-ResumeBuilder-Component-WorkTicket"
                               class="HH-ResumeBuilder-Component-WorkTicket-Other" />
                        Другие страны
                    </label>
                </li>
            </ul>

            <div class="HH-ResumeBuilder-Component-CountryPicker"></div>
        </div>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-Component-Suggest">
        <% if (suggest.length > 0) { %>
        <ul class="HH-Suggest-Results suggest-list">
            <% _.each(suggest, function(suggest) { %>
            <li class="HH-ResumeBuilder-SuggestItem suggest-list__item"><%= suggest %></li>
            <% }); %>
        </ul>
        <% } %>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-Component-AreaModal">
        <% if (area != null) { %>
        <ul class="area-list">
            <% _.each(area.areas, function(a) { %>
            <li class="area-list__item">
                <% if (a.open) { %>
                <span class="area-list__item-text area-list__item-text_active"><%= a.name %></span>
                <%= fntemplate({area: a, fntemplate: fntemplate}) %>
                <% } else { %>
                <span class="area-list__item-text"><%= a.name %></span>
                <% } %>
            </li>
            <% }); %>
        </ul>
        <% } %>
    </script>

    <script type="text/template" id="HH-ResumeBuilder-Component-CountryPicker">
        <ul class="checkbox-list">
            <% _.each(area, function(area) { %>
            <li class="checkbox-list__item">
                <label>
                    <input type="checkbox" <%= selectedIds.indexOf(area.id) >=0 ? 'checked' : '' %>/>
                    <%= area.name  %>
                </label>
            </li>
            <% }); %>
        </ul>
    </script>
</body>
</html>
